<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ª–µ—Å–æ —É–¥–∞—á–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
        }

        .container {
            max-width: 400px;
            width: 100%;
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            overflow: hidden;
            position: relative;
        }

        .slide {
            padding: 24px;
            transition: transform 0.3s ease;
        }

        .slide.hidden {
            display: none;
        }

        h2 {
            font-size: 24px;
            margin-bottom: 24px;
            color: #333;
            text-align: center;
        }

        .market-buttons {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 32px 0;
        }

        .market-btn {
            flex: 1;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 16px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .market-btn.selected {
            border-color: #667eea;
            background: #f0f3ff;
            transform: scale(1.02);
        }

        .market-btn img {
            width: 48px;
            height: 48px;
            object-fit: contain;
        }

        .market-btn span {
            font-weight: 600;
            color: #333;
        }

        .upload-area {
            border: 2px dashed #cbd5e0;
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            margin: 24px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f7fafc;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .upload-area.dragover {
            border-color: #667eea;
            background: #e6ecff;
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .file-info {
            margin: 16px 0;
            padding: 12px;
            background: #e6ecff;
            border-radius: 8px;
            display: none;
        }

        .file-info.show {
            display: block;
        }

        .continue-btn {
            width: 100%;
            padding: 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        .continue-btn.active {
            opacity: 1;
            pointer-events: auto;
        }

        .continue-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–ª–µ—Å–∞ */
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px auto 40px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 4s cubic-bezier(0.25, 0.1, 0.15, 1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            padding-right: 20px;
            box-sizing: border-box;
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            z-index: 10;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        .wheel-pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid #ff4444;
            z-index: 20;
            filter: drop-shadow(0 4px 2px rgba(0,0,0,0.2));
        }

        .spin-btn {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .spin-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-message {
            text-align: center;
            margin-top: 20px;
            padding: 16px;
            border-radius: 12px;
            background: #f0f3ff;
            display: none;
        }

        .result-message.show {
            display: block;
        }

        .prize-name {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e0e0e0;
            margin: 20px 0;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .step {
            flex: 1;
            text-align: center;
            font-size: 14px;
            color: #999;
            position: relative;
        }

        .step.active {
            color: #667eea;
            font-weight: 600;
        }

        .step.completed {
            color: #48bb78;
        }

        .step:not(:last-child):after {
            content: '';
            position: absolute;
            top: 50%;
            right: -50%;
            width: 100%;
            height: 2px;
            background: #e0e0e0;
            transform: translateY(-50%);
        }

        .step.active:after {
            background: #667eea;
        }

        .step.completed:after {
            background: #48bb78;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —à–∞–≥–æ–≤ -->
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="step-indicator">
            <div class="step active" id="step1">–í—ã–±–æ—Ä</div>
            <div class="step" id="step2">–°–∫—Ä–∏–Ω—à–æ—Ç</div>
            <div class="step" id="step3">–õ–æ—Ç–µ—Ä–µ—è</div>
        </div>

        <!-- –°–ª–∞–π–¥ 1: –í—ã–±–æ—Ä –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ -->
        <div class="slide" id="slide1">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h2>
            <div class="market-buttons">
                <button class="market-btn" data-market="wildberries" id="wbBtn">
                    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/wildberries.svg" alt="Wildberries" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'48\' height=\'48\' viewBox=\'0 0 24 24\'><text x=\'0\' y=\'20\' font-size=\'20\'>WB</text></svg>'">
                    <span>Wildberries</span>
                </button>
                <button class="market-btn" data-market="ozon" id="ozonBtn">
                    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/ozon.svg" alt="Ozon" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'48\' height=\'48\' viewBox=\'0 0 24 24\'><text x=\'0\' y=\'20\' font-size=\'20\'>OZON</text></svg>'">
                    <span>Ozon</span>
                </button>
            </div>
            <button class="continue-btn" id="continueBtn1" onclick="nextSlide()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>

        <!-- –°–ª–∞–π–¥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ -->
        <div class="slide hidden" id="slide2">
            <h2>–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç</h2>
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üì∏</div>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</p>
                <p style="font-size: 12px; color: #999; margin-top: 8px;">–∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å—é–¥–∞</p>
                <input type="file" id="fileInput" accept="image/*" style="display: none;">
            </div>
            <div class="file-info" id="fileInfo">
                <span id="fileName"></span>
            </div>
            <button class="continue-btn" id="continueBtn2" onclick="nextSlide()" disabled>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>

        <!-- –°–ª–∞–π–¥ 3: –ö–æ–ª–µ—Å–æ –ª–æ—Ç–µ—Ä–µ–∏ -->
        <div class="slide hidden" id="slide3">
            <h2>–ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ —É–¥–∞—á–∏!</h2>
            <div class="wheel-container">
                <div class="wheel-pointer"></div>
                <div class="wheel" id="wheel"></div>
                <div class="wheel-center"></div>
            </div>
            <button class="spin-btn" id="spinBtn" onclick="spinWheel()">–ö—Ä—É—Ç–∏—Ç—å!</button>
            <div class="result-message" id="resultMessage">
                <div class="prize-name" id="prizeName"></div>
                <p id="prizeDescription"></p>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        // –ü—Ä–∏–∑—ã –∏ –∏—Ö –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ (–≤ —Å—É–º–º–µ 100%)
        const prizes = [
            { name: "10% —Å–∫–∏–¥–∫–∞", probability: 30, description: "–°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ª—é–±–æ–π —Ç–æ–≤–∞—Ä" },
            { name: "PlayStation 5", probability: 1, description: "–ò–≥—Ä–æ–≤–∞—è –∫–æ–Ω—Å–æ–ª—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è" },
            { name: "5000‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É", probability: 5, description: "–î–µ–Ω—å–≥–∏ –ø—Ä–∏–¥—É—Ç –Ω–∞ –∫–∞—Ä—Ç—É –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤" },
            { name: "1000‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É", probability: 15, description: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –Ω–∞ 1000 —Ä—É–±–ª–µ–π" },
            { name: "50% —Å–∫–∏–¥–∫–∞", probability: 3, description: "–°–∫–∏–¥–∫–∞ 50% –Ω–∞ –ª—é–±–æ–π —Ç–æ–≤–∞—Ä" },
            { name: "Haval H5", probability: 0.5, description: "–ê–≤—Ç–æ–º–æ–±–∏–ª—å Haval H5 (–Ω—É–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å –≤ —Å–∞–ª–æ–Ω–µ)" },
            { name: "Air Pods", probability: 4, description: "–ù–∞—É—à–Ω–∏–∫–∏ AirPods Pro" },
            { name: "500‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É", probability: 25, description: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –Ω–∞ 500 —Ä—É–±–ª–µ–π" },
            { name: "20000‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É", probability: 2, description: "–ö—Ä—É–ø–Ω—ã–π –¥–µ–Ω–µ–∂–Ω—ã–π –ø—Ä–∏–∑" },
            { name: "10000‚ÇΩ –Ω–∞ –∫–∞—Ä—Ç—É", probability: 3.5, description: "–î–µ–Ω–µ–∂–Ω—ã–π –ø—Ä–∏–∑ 10000 —Ä—É–±–ª–µ–π" },
            { name: "–£—á–∞—Å—Ç–∏–µ –≤ —Å—É–ø–µ—Ä–∏–≥—Ä–µ", probability: 11, description: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —à–∞–Ω—Å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à–µ" }
        ];

        let currentSlide = 1;
        let selectedMarket = null;
        let uploadedFile = null;
        let spinInProgress = false;
        let currentRotation = 0;

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
        function updateProgress() {
            const progress = (currentSlide / 3) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentSlide) {
                    step.classList.add('completed');
                } else if (index + 1 === currentSlide) {
                    step.classList.add('active');
                }
            });
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–∞–π–¥–∞–º–∏
        function nextSlide() {
            if (currentSlide < 3) {
                if (currentSlide === 1 && !selectedMarket) {
                    tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å');
                    return;
                }
                if (currentSlide === 2 && !uploadedFile) {
                    tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç');
                    return;
                }

                document.getElementById(`slide${currentSlide}`).classList.add('hidden');
                currentSlide++;
                document.getElementById(`slide${currentSlide}`).classList.remove('hidden');
                updateProgress();

                if (currentSlide === 3) {
                    createWheel();
                }
            }
        }

        // –í—ã–±–æ—Ä –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
        document.querySelectorAll('.market-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.market-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                selectedMarket = this.dataset.market;
                document.getElementById('continueBtn1').classList.add('active');
            });
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const continueBtn2 = document.getElementById('continueBtn2');

        uploadArea.addEventListener('click', () => fileInput.click());

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const file = e.dataTransfer.files[0];
            if (file && file.type.startsWith('image/')) {
                handleFileUpload(file);
            }
        });

        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                handleFileUpload(file);
            }
        });

        function handleFileUpload(file) {
            uploadedFile = file;
            fileName.textContent = `üìÅ ${file.name}`;
            fileInfo.classList.add('show');
            continueBtn2.classList.add('active');
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ª–µ—Å–∞
        function createWheel() {
            const wheel = document.getElementById('wheel');
            wheel.innerHTML = '';
            
            const segmentAngle = 360 / prizes.length;
            
            prizes.forEach((prize, index) => {
                const segment = document.createElement('div');
                segment.className = 'wheel-segment';
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞
                const rotate = index * segmentAngle;
                segment.style.transform = `rotate(${rotate}deg) skewY(${90 - segmentAngle}deg)`;
                segment.style.backgroundColor = `hsl(${index * (360 / prizes.length)}, 70%, 60%)`;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç (–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω–æ)
                const textSpan = document.createElement('span');
                textSpan.style.transform = `skewY(-${90 - segmentAngle}deg) rotate(${segmentAngle/2}deg)`;
                textSpan.style.position = 'absolute';
                textSpan.style.left = '50%';
                textSpan.style.top = '25%';
                textSpan.style.transformOrigin = '0 0';
                textSpan.style.whiteSpace = 'nowrap';
                
                // –°–æ–∫—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                let shortName = prize.name;
                if (shortName.length > 10) {
                    if (shortName.includes('PlayStation')) shortName = 'PS5';
                    else if (shortName.includes('Haval')) shortName = 'Haval';
                    else shortName = shortName.substring(0, 8) + '...';
                }
                textSpan.textContent = shortName;
                
                segment.appendChild(textSpan);
                wheel.appendChild(segment);
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–∏–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
        function getRandomPrize() {
            const random = Math.random() * 100;
            let cumulativeProbability = 0;
            
            for (const prize of prizes) {
                cumulativeProbability += prize.probability;
                if (random <= cumulativeProbability) {
                    return prize;
                }
            }
            return prizes[0]; // –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
        }

        // –í—Ä–∞—â–µ–Ω–∏–µ –∫–æ–ª–µ—Å–∞
        function spinWheel() {
            if (spinInProgress) return;
            
            spinInProgress = true;
            const spinBtn = document.getElementById('spinBtn');
            spinBtn.disabled = true;
            
            // –ü–æ–ª—É—á–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–∏–∑
            const selectedPrize = getRandomPrize();
            
            // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –≤—ã–ø–∞–≤—à–µ–≥–æ –ø—Ä–∏–∑–∞
            const prizeIndex = prizes.findIndex(p => p.name === selectedPrize.name);
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É–≥–æ–ª –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –Ω—É–∂–Ω–æ–º —Å–µ–∫—Ç–æ—Ä–µ
            const segmentAngle = 360 / prizes.length;
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–µ–∫—Ç–æ—Ä–∞
            const randomOffset = Math.random() * segmentAngle;
            // –¶–µ–ª–µ–≤–æ–π —É–≥–æ–ª (—á—Ç–æ–±—ã —Å–µ–∫—Ç–æ—Ä –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–¥ —É–∫–∞–∑–∞—Ç–µ–ª–µ–º)
            const targetAngle = 360 - (prizeIndex * segmentAngle + segmentAngle/2 + randomOffset) + 90;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã
            const spins = 5;
            const finalRotation = currentRotation + (spins * 360) + targetAngle;
            
            // –ê–Ω–∏–º–∏—Ä—É–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ
            const wheel = document.getElementById('wheel');
            wheel.style.transform = `rotate(${finalRotation}deg)`;
            
            // –ñ–¥–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                spinInProgress = false;
                currentRotation = finalRotation % 360;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                const resultMessage = document.getElementById('resultMessage');
                const prizeName = document.getElementById('prizeName');
                const prizeDescription = document.getElementById('prizeDescription');
                
                prizeName.textContent = selectedPrize.name;
                prizeDescription.textContent = selectedPrize.description;
                resultMessage.classList.add('show');
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –±–æ—Ç–∞
                tg.sendData(JSON.stringify({
                    market: selectedMarket,
                    prize: selectedPrize.name,
                    timestamp: new Date().toISOString()
                }));
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    tg.close();
                }, 3000);
            }, 4000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateProgress();

        // –û—Å–Ω–æ–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ Telegram (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        tg.MainButton.setText('–ó–∞–∫—Ä—ã—Ç—å');
        tg.MainButton.hide();
    </script>
</body>
</html>
